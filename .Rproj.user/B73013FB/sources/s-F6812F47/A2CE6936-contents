#
# run.R
# Swapboard
#
# Created by Tosin on 26/11/2019
# MIT License and shit
#
#library(rmarkdown)
library(shiny)

# When we run nginx we need to change R to point to the /app folder manually
setwd('/app')



# Gets the port # from Heroku
port <- Sys.getenv('PORT')

# Runs the app in the working directory. By default this will search for an `LAG_RUGv0.2.Rmd` file or 
# In this case the port is now the address to the nginx proxy
# The host of 0.0.0.0 indicates the app runs at the web server's ip address
rmarkdown::run(
  "LAG_RUGv0.2.Rmd",
   shiny_args = list(
     host = '0.0.0.0',
     port = as.numeric(port))
)